{"mappings":"AAAA,MAAMA,OAAS,mCAETC,aAAeC,SAASC,eAAe,cACvCC,YAAcF,SAASG,cAAc,6BACrCC,UAAYJ,SAASC,eAAe,cACpCI,WAAaL,SAASC,eAAe,eACrCK,eAAiBN,SAASC,eAAe,mBAqC7C,SAASM,cACQP,SAASQ,iBAAiB,UAClCC,SAAQC,GAASA,EAAMC,UAChC,CAEF,SAASC,UAAUC,GACjB,MAAMH,EAAQV,SAASc,cAAc,KACrCJ,EAAMK,UAAY,4DAClBL,EAAMM,UAAUC,IAAI,SACpBP,EAAMQ,YAAcL,EACpBP,eAAea,YAAYT,EAC7B,CAEA,SAASU,WAAWC,GAClB,MAAMC,EAAMtB,SAASc,cAAc,OACnCQ,EAAIC,IAAMF,EACVC,EAAIE,iBAAiB,SAAS,WAC5BZ,UAAU,4BAA4BS,IACxC,IACAf,eAAea,YAAYG,EAC7B,CAEA,SAASG,cACP,MAAMC,EAAS1B,SAASQ,iBAAiB,OAEzC,IAAK,MAAMc,KAAOI,EAChBJ,EAAIX,QAER,CA/DAZ,aAAayB,iBAAiB,SAASG,iBACnCpB,cACA,MAAMqB,EAAa1B,YAAY2B,MAAMC,OAC/BC,EAAO3B,UAAUyB,MACjBG,EAAQC,SAAS5B,WAAWwB,OAClC,GAAmB,KAAfD,EAAmB,CACrBH,cACA,MAAMJ,EAAM,iDAAiDvB,2CAA2C8B,2CAAoDI,WAE5J,IACE,MAAME,QAAiBC,MAAMd,GAC7B,IAAIa,EAASE,GAcX,MAAM,IAAIC,MAAM,gCAbGH,EAASI,QACvBC,OAAOC,MAAM/B,SAAQ+B,IACxB,IAAIC,EACQ,MAATV,EACDU,EAAS,iCAAiCD,EAAME,UAAUF,EAAMG,MAAMH,EAAMI,gBAC3D,MAATb,GAES,MAATA,KADRU,EAAS,iCAAiCD,EAAME,UAAUF,EAAMG,MAAMH,EAAMI,UAAUb,SAIxFX,WAAWqB,EAAA,GAKjB,CAAE,MAAO/B,GACPE,UAAUF,EAAMG,QAClB,CACF,MACED,UAAU,0BAEd,IAgCF,MAAMiC,YAAc7C,SAASQ,iBAAiB,sBAE9CqC,YAAYpC,SAAQqC,IAClBA,EAAOtB,iBAAiB,SAAS,WAC/BC,cACsBzB,SAASG,cAAc,8BAA8B0B,MAC3EgB,YAAYpC,SAAQqC,IAClBA,EAAOC,gBAAgB,eAEzBD,EAAOE,aAAa,WAAY,WAClC","sources":["src/script.js"],"sourcesContent":["const apiKey = '26c72b1be7839b165f1d4370d6a5dd35';\r\n\r\nconst searchButton = document.getElementById('get-images');\r\nconst searchInput = document.querySelector('input[name=\"search-text\"]');\r\nconst imageSize = document.getElementById('image-size');\r\nconst imageCount = document.getElementById('image-count');\r\nconst imageContainer = document.getElementById('image-container');\r\n\r\nsearchButton.addEventListener('click', async function() {\r\n    clearErrors();\r\n    const searchText = searchInput.value.trim();\r\n    const size = imageSize.value;\r\n    const count = parseInt(imageCount.value);\r\n    if (searchText !== '') {\r\n      clearImages();\r\n      const url = `https://www.flickr.com/services/rest/?api_key=${apiKey}&method=flickr.photos.search&text=${searchText}&format=json&nojsoncallback=1&per_page=${count}&page=1`;\r\n  \r\n      try {\r\n        const response = await fetch(url);\r\n        if (response.ok) {\r\n          const data = await response.json();\r\n          data.photos.photo.forEach(photo => {\r\n            let imgUrl;\r\n            if(size === \"l\"){\r\n              imgUrl = `https://live.staticflickr.com/${photo.server}/${photo.id}_${photo.secret}_b.jpg`;\r\n            } else if(size === \"m\"){\r\n              imgUrl = `https://live.staticflickr.com/${photo.server}/${photo.id}_${photo.secret}_${size}.jpg`;\r\n            } else if(size === \"s\"){\r\n              imgUrl = `https://live.staticflickr.com/${photo.server}/${photo.id}_${photo.secret}_${size}.jpg`;\r\n            }\r\n            displayImg(imgUrl);\r\n          });\r\n        } else {\r\n          throw new Error('Oops, något gick fel!');\r\n        }\r\n      } catch (error) {\r\n        showError(error.message);\r\n      }\r\n    } else {\r\n      showError('Var god ange ett sökord');\r\n    }\r\n  });\r\n  \r\n  function clearErrors() {\r\n    const errors = document.querySelectorAll('.error');\r\n    errors.forEach(error => error.remove());\r\n  }\r\n\r\nfunction showError(message) {\r\n  const error = document.createElement('p');\r\n  error.innerText = 'Bilden som angivet kunde inte hittas, var god försök igen'\r\n  error.classList.add('error');\r\n  error.textContent = message;\r\n  imageContainer.appendChild(error);\r\n}\r\n\r\nfunction displayImg(url) {\r\n  const img = document.createElement('img');\r\n  img.src = url;\r\n  img.addEventListener('error', function() {\r\n    showError(`Fel vid hämtning av bild ${url}`);\r\n  });\r\n  imageContainer.appendChild(img);\r\n}\r\n\r\nfunction clearImages() {\r\n  const images = document.querySelectorAll('img');\r\n\r\n  for (const img of images) {\r\n    img.remove();\r\n  }\r\n}\r\n\r\nconst sizeOptions = document.querySelectorAll('#image-size option');\r\n\r\nsizeOptions.forEach(option => {\r\n  option.addEventListener('click', function() {\r\n    clearImages();\r\n    const currentOption = document.querySelector('#image-size option:checked').value;\r\n    sizeOptions.forEach(option => {\r\n      option.removeAttribute('selected');\r\n    });\r\n    option.setAttribute('selected', 'selected');\r\n  });\r\n});"],"names":["apiKey","searchButton","document","getElementById","searchInput","querySelector","imageSize","imageCount","imageContainer","clearErrors","querySelectorAll","forEach","error","remove","showError","message","createElement","innerText","classList","add","textContent","appendChild","displayImg","url","img","src","addEventListener","clearImages","images","async","searchText","value","trim","size","count","parseInt","response","fetch","ok","Error","json","photos","photo","imgUrl","server","id","secret","sizeOptions","option","removeAttribute","setAttribute"],"version":3,"file":"index.f893d337.js.map"}